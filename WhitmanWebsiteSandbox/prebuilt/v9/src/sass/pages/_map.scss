/**********************************
#MAP

Info - Styles for the map page type.

**********************************/

/**********************************
Map Variables

Notes
[1]     This is the width of the detail boxes - the main content of the
		map controls without padding or the hide button. Using this and the
		padding to calculate several other static widths. If you want to chnage
		the width of the controls, start here.
**********************************/
$mc-bg-color:						rgb(250,250,250);
$mc-primary-font-color: 			$dark-gray;
$mc-primary-hover-color: 			$medium-blue-2;
$mc-hide-button-bg-color:			$dark-blue;
$mc-hide-button-hover-bg-color:		$dark-blue-trans; 
$mc-button-toggle-color: 			$dark-blue; 
$mc-button-toggle-hover-color: 		$light-gray-2;
$mc-back-link-color:				$dark-blue; 
$mc-back-link-hover-color:			$medium-blue-2;


/**********************************
Width
**********************************/
$mc-desktop-detail-box-width:				260px;/*[1]*/
$mc-desktop-slide-track-width:				262px;
$mc-content-desktop-side-padding:			16px;
$mc-desktop-content-box-width:				$mc-desktop-detail-box-width + ($mc-content-desktop-side-padding * 2);
$mc-desktop-hide-button-width:				48px;


/**********************************
Height

Notes
[1]		We want the map controls to expand if you have a large browser window...
[2] 	...but never collapse below this height
**********************************/
$mc-desktop-height:					70%;/*[1]*/
$mc-min-desktop-height:				500px;/*[2]*/

html.wc-map-page{
	.wc-content-wrap.wc-map-page{
		@include responsivePaddingTop(0,72px,124px,124px);
		display: block;
		.wc-map{
			display: block;
			width: 100%;
			height: 100%;
			position: relative;
		}
		.wc-mobile-only{
			display: none;
		}
	}
}

.wc-map-page{
	.wc-map-box {
		height: 0;
		overflow: hidden;
		padding-bottom: 60%;
		padding-top: 30px;
		position: relative;
		margin: 0;
		padding: 0;
		width:100%;
		height: 100%;
		position: relative;

		img {
			max-width: none !important;
		}
	}
}

	/**********************************
	Controls

	Notes
	[1] 	Hide the description when its hidden so when the controls resize
			on mobile for places with 1 vs. 2 line headings, you don't see a bit
			of the old description peaking out. Using a delayed transition and only
			applying it when hidden so you never actually see the opacity change.
	**********************************/ 
	.wc-map-controls{
		position: absolute;
		z-index: 200;
		background-color: $mc-bg-color;
		padding: 0;

		@media(min-width:$screen-sm-min){
			bottom:50%;
			transform:translateY(50%);
			box-shadow: -3px 3px 8px rgba(0,0,0,.5);
			border-top-left-radius: $border-radius;
			border-bottom-left-radius: $border-radius;
			overflow-x: hidden;
			height: $mc-desktop-height;
			min-height: $mc-min-desktop-height;
			box-shadow: 0 0 5px rgba(0,0,0,.5);
			right: 0;
			transition: right .3s;
			&.wc-mc-hidden{
				right: -$mc-desktop-content-box-width;
			}
		}
		@media(max-width:$screen-xs-max){
		    box-shadow: 0 0 120px 40px rgba(0,0,0,0.5);
			width: 100%;
			bottom: 0;
			transition: bottom .3s;
			overflow-y: scroll;
			-webkit-overflow-scrolling: touch;
			&.wc-mc-hidden{
				box-shadow: 0 0 5px rgba(0,0,0,.5);
				.wc-mc-description{
					opacity: 0;  /*[]*/
					transition: opacity 100ms 200ms;
				}
			}
		}
		.wc-mc-content-box{
			overflow:hidden;
			height: 100%;
			@include clearfix();
			@media(max-width:$screen-xs-max){
				width: 100%;
			}
			@media(min-width:$screen-sm-min){
				width: $mc-desktop-content-box-width;
				float: right;
				padding: 0 $mc-content-desktop-side-padding;

			}
		}

		/**********************************
		Button Toggle - the categories/places button at the top

		Notes
		[1][2] 	Giving these static heights is ridiculous but necessary because of a
				bug in firefox.
		**********************************/
		.wc-button-toggle{
			width:100%;
			float: none;
			height: 42px;/*[1]*/
			@extend .hidden-xs;
			a{
				width: 50%;
				height: 43px;/*[2]*/
			}
		}
	}

		/**********************************
		Hide Buttons

		Notes
		[1][2]  Funny thing - because this is rotated 90 degrees, in order
				to bump it up half it's height (for centering it vertically)
				we actually use translateX instead of translateY.
		[3] 	Making this stick out a bit to the left to give it more of 
				a clickable area.
		**********************************/
		.wc-mc-desktop-hide-button{
			@extend .hidden-xs;
			display: block;
			height: 100%;
			width: $mc-desktop-hide-button-width;
			float: right;
			text-align: center;
			padding: 4px 0;
			position: relative;
			background-color: $mc-hide-button-bg-color;

			.wc-icon{
				@include icon(36px, $white);
				transform:rotate(90deg) translateX(-50%); /*[1]*/
				display: block;
				position: absolute;
				top:50%;
				left: 7px;
			}
			&:hover{
				background-color:$mc-hide-button-hover-bg-color;
			}
			&:not(.wc-toggled){
				.wc-icon{
					transform:rotate(270deg) translateX(50%);/*[2]*/
				}
			}
		}

		.wc-mc-mobile-hide-button{
			@extend .hidden-sm;
			@extend .hidden-md;
			@extend .hidden-lg;
			width: 100%;
			min-width: 130px;
			display: block;		
			padding: .8rem;
			text-align: center;
			svg{
				margin-top: 2px;
			}
			&.wc-main-menu-button{
				@include button(17px, 1.3rem,$medium-blue);
				.wc-text{
					text-transform: uppercase;
					padding: 0 .3rem;
				}
			}
		}
			.wc-mc-icon-button{
				@include button(15px, 1.3rem,$medium-blue);
				display: block;
				&.wc-mc-close-button{
					padding: 8px 1rem;
					position: absolute;
					left: -1rem;/*[3]*/
					top: 50%;
					transform: translateY(-50%);
					border-right: 1px solid #cdcdcd;
					z-index: 100;
				}
			}
			.wc-mc-mobile-header-button{
				@include button(21px, 1.3rem,$medium-blue);
				
				.wc-text{
					padding: 0 32px;
					max-width: 88%;
					vertical-align: top;
				}
				.wc-icon{
					display: block;
					position: absolute;
					right: 0;
					top: 50%;
					transform: translateY(-50%);
					transition: transform .3s;
				}
				&:not(.wc-toggled){
					.wc-icon{
						transform:rotate(180deg) translateY(50%); /*[1]*/
					}
				}
			}

		/**********************************
		Slide Track

		Info
		[-]     This is the box that the detail boxes "slide" within when
				navigation the controls

		Notes
		[1] 	Set by JS on mobile
		**********************************/
		.wc-mc-slide-track{
			clear: both;
			overflow-x: hidden;
			padding: 0;
			position: relative;
			@include responsiveHeight(auto,100%,100%,100%); /*[1]*/
			@include responsiveWidth(100%,$mc-desktop-slide-track-width,$mc-desktop-slide-track-width,$mc-desktop-slide-track-width);
			@include clearfix();
		}		

		/**********************************
		Detail boxes - these are basically the slides for the different lists
		and information

		Notes
		[1] 	This fixes a bug in iOS where some detail boxes won't display after you
				click on a location on the map. Some kind of a bug related to google maps i think. 
				Anyway, this fixes it, no idea why.
		[2] 	For an ios bug: in order for MapControl.mobileSizing() to run successfully
				the first time, this needs a min-height. Otherwise when it measures the 
				height of the detail box's header it returns 0 initially.
		**********************************/
		.wc-mc-detail-box{
			background-color:$mc-bg-color;
			position: absolute;
			transition: left .3s;
			padding-top: 1rem;
			height: 100%;
			overflow-x:hidden; /*[1]*/
			display: flex;
			flex-direction: column;
			@include responsivePaddingLeft(1rem,0,0,0);
			@include responsivePaddingRight(1rem,0,0,0);
			@include responsiveWidth(100%,$mc-desktop-detail-box-width,$mc-desktop-detail-box-width,$mc-desktop-detail-box-width);
			@include responsivePaddingTop(0,1rem,1rem,1rem);

			&:not(.wc-mc-detail-box-base){
				left: 100%;
			}
			&.wc-mc-detail-box-base{
				@include responsiveMinHeight(100px,0,0,0); /*[2]*/
			}
			.wc-mc-detail-box-content{
				flex:1;
				overflow-y: auto;
				@include clearfix();
			}
			.wc-mc-description {

				li a{
					@extend .wc-mobile-friendly;
				}
			}


			.wc-mc-header-box{
				width: 100%;
				position: relative;
				@include responsiveMargin(0, 0 0 .8rem 0, 0 0 .8rem 0, 0 0 .8rem 0);

				@include clearfix();
				.wc-back-link{
					background-color: $mc-back-link-color;
					margin-bottom: .8rem;
					&:hover{
						background-color: $mc-back-link-hover-color;
					}
				}
			}

				.wc-mc-heading{
					font-size: 1.4rem;
					margin:0;
					font-weight: bold;
					display: block;
					float: left;
					width: 100%;
				}
			.wc-mc-feature-image{
				width: 100%;
				margin-bottom: .8rem;
			}
			hr.wc-mc-header-divider{
				float: left;
				display: block;
				width: 100%;
				margin: .8rem 0 0 0;
			}

			/**********************************
			Link Lists
			**********************************/
			.wc-mc-items-list{
				margin:0;
				padding: 0;
				list-style-type: none;
				@include clearfix();
				li{
					@include clearfix();
					width:100%;
					@media(max-width:$screen-xs-max){
    					border-bottom: 1px solid #cdcdcd;
					}
				}
			}
				.wc-item-link{
					color:$mc-primary-font-color;
					display: block;
					font-weight: 600;
					width: 100%;
					@include responsivePadding(.8rem 0, .3rem 0,.3rem 0,.3rem 0);
					@include clearfix();
					.wc-text{
						display: block;
						float: left;
						max-width: 80%;
						line-height: 1.3rem;
						@include responsiveFontSize(1.1rem,1rem,1rem,1rem);
					}
					.wc-icon{
						@include icon(20px, $mc-primary-hover-color);
						float: right;
						margin-top: 2px;
						display: none;
					}
					&:hover{
						text-decoration: none;
						color: $mc-primary-hover-color;
						.wc-icon{
							@include responsiveDisplay(none,block,block,block);
						}
					}
				}
		}

	/**********************************
	Message Box - for the geolocation messages
	**********************************/
	.wc-map-message-box{
		position: absolute;
		width: 100%;
		box-shadow: 0 0 5px rgba(0,0,0,.5);
		bottom: 0;
		z-index: 400;
		background-color: $white;
		padding: 1rem;
		transform: translateY(100%);
		@extend .hidden-sm;
		@extend .hidden-md;
		@extend .hidden-lg;
		@include clearfix();
		.wc-button-box{
			width: 100%;
			text-align: center;
		}
		.wc-loader-gif{
			display: block;
			margin-left: auto;
			margin-right: auto;
		}
	}
		.wc-message-box-button{
			@extend .wc-box-button;
			display: inline-block;
			width: 49%;
			text-align: center;
			padding: .4rem 0;
			margin-top: 4px;
			margin-bottom: 4px;
			&:first-of-type{
				margin-right:2%;
			}
			&:hover{
				text-decoration: none;
			}
		}


	/**********************************
	Mobile Menu Button
	**********************************/
	.wc-mc-mobile-menu-button{
		@extend .hidden-md;
		@extend .hidden-lg;
	}

/**********************************
IE Fixes
**********************************/
html.ie-yes .wc-mc-detail-box{
	&.wc-hidden{
		height: 0;
		overflow: hidden;
	}
}

/**********************************
Misc Fixes

Notes
[1] 	Fix for this issue - http://stackoverflow.com/questions/7471830/google-maps-api-v3-weird-ui-display-glitches-with-screenshot
**********************************/
[id="map-canvas"] img { /*[1]*/
	max-width: none;
}